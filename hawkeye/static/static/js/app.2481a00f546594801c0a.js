webpackJsonp([1],{"0Jfj":function(e,t,a){e.exports=a.p+"static/img/receive.ae94425.png"},"0j6u":function(e,t,a){e.exports=a.p+"static/img/carousel1.af1f733.jpg"},"5mAy":function(e,t){},"6EcE":function(e,t){},CgrL:function(e,t){},ENeJ:function(e,t){},FM59:function(e,t){},LGF1:function(e,t){},NHnr:function(e,t,a){"use strict";function r(e){var t=e.type,a=(e.form,e.page),r=e.pageSize,n=e.search,s=e.id;switch(t){case"get":return v.a.get("/api/v1/monitor/dream/"+(s||"")+"?page="+a+"&page_size="+r+"&"+B.a.stringify(n))}}function n(e){return v.a.post("/api/v1/monitor/send_code/",{phone_num:e})}function s(e){var t=e.id,a=e.group;return v.a.post("/api/v1/monitor/dream/"+t+"/claim/",a)}function o(e){return v.a.post("/api/v1/auth/login/",e)}function i(e){return v.a.get("/api/v1/auth/users/"+(e||""))}function l(e){return v.a.delete("/api/v1/auth/users/"+e)}function c(e){return ie()(e,{is_superuser:!1,is_staff:!0,is_admin:!1}),v.a.post("/api/v1/auth/users/",e)}function u(e){var t=e.type,a=e.form,r=e.page,n=e.pageSize,s=e.ids,o=e.search;switch(t){case"get":return v.a.get("/api/v1/monitor/dream/"+(s||"")+"?page="+r+"&page_size="+n+"&"+B.a.stringify(o));case"delete":return v.a.delete("/api/v1/monitor/dream/"+(s||""));case"patch":return v.a.patch("/api/v1/monitor/dream/"+(s||"")+"/",a);case"post":return v.a.post("/api/v1/monitor/dream/"+(s||""),a)}}Object.defineProperty(t,"__esModule",{value:!0});var p=a("7+uW"),d=a("zL8q"),m=a.n(d),f=(a("tvR6"),a("QdbL")),h=a.n(f),g=(a("ENeJ"),a("mtWM")),v=a.n(g),_=a("lbHh"),b=a.n(_),w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},y=a("VU/8")({name:"app"},w,!1,function(e){a("tRfm")},null,null).exports,x=a("/ocq"),k={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",[t("el-header",[t("el-row",[t("el-col",{attrs:{span:14,offset:5}},[t("el-row",[t("el-col",{attrs:{span:1}},[t("img",{staticClass:"tuanhui",attrs:{src:"http://www.gqt.org.cn/ccylmaterial/tuanhui/200612/W020070123448949739156.gif"}})]),this._v(" "),t("el-col",{attrs:{span:20}},[t("div",{staticClass:"header-title"},[this._v("宁波市青少年万人圆梦行动")])])],1)],1)],1)],1),this._v(" "),t("el-main",[t("div",{staticStyle:{"background-color":"#ffffff"}},[t("router-view")],1)])],1)],1)},staticRenderFns:[]},$=a("VU/8")({name:"web",data:function(){return{msg:"Welcome to Your Vue.js App"}}},k,!1,function(e){a("5mAy")},null,null).exports,V=a("Xxa5"),C=a.n(V),S=a("exGp"),z=a.n(S),F=a("Gu7T"),E=a.n(F),L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item"},[a("el-card",{class:"item-card",attrs:{"body-style":{padding:"5px"}}},[a("div",{staticClass:"img"},[a("img",{staticClass:"image",attrs:{src:e.data.image_url}})]),e._v(" "),a("div",{staticClass:"content",staticStyle:{padding:"14px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"font-size":"15px","font-weight":"500"},attrs:{span:18}},[e._v(e._s(e.data.title))]),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("项目状态："+e._s(e.data.is_claimed?"已认领":"未认领"))])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:18}},[e._v("项目简介："+e._s(e.data.want))])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:18}},[e._v("发布时间:"+e._s(e.data.updated_at))])],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:18}},[e._v("发布方："+e._s(e.data.contact_person))]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"success",plain:"",size:"small",disabled:e.data.is_claimed},on:{click:e.click}},[e._v("我要认领")])],1)],1)],1)])],1)},staticRenderFns:[]},R=a("VU/8")({props:["data","receive","noReceive"],methods:{click:function(){this.$emit("claim",this.data.id)}}},L,!1,function(e){a("6EcE")},null,null).exports,q=a("OAwv"),B=a.n(q);v.a.interceptors.response.use(function(e){return void 0===e?{response_error:!0}:e},function(e){e&&e.response.status&&console.log(e.response.status)});var T=a("0j6u"),A=a.n(T),U=a("QXf2"),D=a.n(U),j=a("0Jfj"),O=a.n(j),M=a("mvg6"),H=a.n(M),W={data:function(){return{loacls:["海曙","高新","江北","镇海","北仑","鄞州","宁海","象山","慈溪","余姚","奉化","其他"],receive:O.a,noReceive:H.a,page:1,page_size:10,caArr:[A.a,D.a],searchValue:{is_claimed:"",local__icontains:"",title__icontains:""},projectStatus:[{key:111,value:"才能杀可能"}],list:[]}},mounted:function(){var e=this;this.$axios.get("/api/v1/monitor/dream/?page="+this.page+"&page_size="+this.page_size).then(function(t){var a;(a=e.list).push.apply(a,E()(t.data.results))})},methods:{search:function(){this.page=1,this.getDate()},viewRules:function(){this.$alert("\n      <p>1.请您填写正确的联系方式。微心愿认领人在了解微心愿基本情况之后，请点击<strong>“我要认领”</strong>选项栏填写您的联系方式，以确定认领意愿，已被认领的微心愿将自动变灰。如果多人同时认领同一个微心愿，系统将自动选择第一个提交联系方式的微心愿认领人，其他未被选中的微心愿认领人可以再选择其他的微心愿进行认领。</p>\n      <p>2.我们会尽快与您对接微心愿。微心愿认领成功后，将有短消息分别发送至微心愿认领人和微心愿联系人（一般为青少年所在的乡镇街道团干部或所在学校的老师）的手机上，请确保不屏蔽相关短信。微心愿联系人和微心愿认领人将尽快通过电话进行联系沟通，商定微心愿的圆梦方式和圆梦时间，并由微心愿联系人协助微心愿认领人将关爱及时送达需要帮助的青少年手中。</p>\n      <p>3.微心愿认领人可在微信朋友圈发起分享<strong>“我已经参与2018年宁波市青少年万人圆梦行动微心愿认领行动”</strong>，动员更多的爱心人士加入到行动中来。</p>","捐赠规则",{dangerouslyUseHTMLString:!0})},loadList:function(){var e=this;return z()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDate();case 2:if(!(t.sent.length<e.page_size)){t.next=6;break}return e.$refs.dreamList.$emit("ydui.infinitescroll.loadedDone"),t.abrupt("return");case 6:e.$refs.dreamList.$emit("ydui.infinitescroll.finishLoad");case 7:case"end":return t.stop()}},t,e)}))()},claim:function(e){this.$router.push({path:"/index/"+e+"/details",query:{id:e}})},getDate:function(e){var t=this;return z()(C.a.mark(function a(){var n,s,o;return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r({type:"get",page:e||t.page,pageSize:t.page_size,search:t.searchValue});case 2:return n=a.sent,s=n.data.results,1===t.page?t.list=s:(o=t.list).push.apply(o,E()(s)),t.page++,a.abrupt("return",s);case 7:case"end":return a.stop()}},a,t)}))()}},components:{Item:R}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"main"},[a("el-row",[a("el-col",{attrs:{span:14,offset:5}},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("首页")])],1),e._v(" "),a("div",{staticClass:"search"},[a("el-row",[a("el-col",[a("el-form",{staticClass:"search-form",attrs:{inline:!0}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:17}},[a("el-form-item",{attrs:{label:"项目状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(t){e.getDate(1)}},model:{value:e.searchValue.is_claimed,callback:function(t){e.$set(e.searchValue,"is_claimed",t)},expression:"searchValue.is_claimed"}},[a("el-option",{attrs:{label:"已认领",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"未认领",value:"false"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地区"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchValue.local__icontains,callback:function(t){e.$set(e.searchValue,"local__icontains",t)},expression:"searchValue.local__icontains"}},e._l(e.loacls,function(e,t){return a("el-option",{key:t,attrs:{value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"80px",label:" "}},[a("el-button",{attrs:{type:"text",icon:"el-icon-info"},on:{click:e.viewRules}},[e._v("认领须知")])],1)],1),e._v(" "),a("el-col",{staticClass:"text-right",attrs:{span:7}},[a("el-form-item",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.searchValue.title__icontains,callback:function(t){e.$set(e.searchValue,"title__icontains",t)},expression:"searchValue.title__icontains"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("yd-layout",[a("yd-infinitescroll",{ref:"dreamList",attrs:{distance:300,callback:e.loadList}},[a("div",{staticClass:"list",attrs:{slot:"list"},slot:"list"},e._l(e.list,function(t,r){return a("item",{key:r,attrs:{data:t,receive:e.receive,noReceive:e.noReceive},on:{claim:e.claim}})})),e._v(" "),a("span",{attrs:{slot:"doneTip"},slot:"doneTip"},[e._v("没有数据啦~~")])])],1)],1)],1)],1)])},staticRenderFns:[]},I=a("VU/8")(W,N,!1,function(e){a("Vj6C")},null,null).exports,J={data:function(){return{dialogTitle:"认领项目-不爱迪赛的",formLabelWidth:"80px",dialogFormVisible:!1,form:{},group:{donor_name:"",phone_num:"",code:"",checked:!0},rules:{donor_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone_num:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){/^1\d{10}$/.test(t)?a():a(new Error("请输入正确的手机号"))},message:"手机号格式错误",trigger:"change"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],checked:[{required:!0,message:"同意协议",trigger:"change"}]},sendCodeBut:!0,isSubmit:!1,id:this.$router.history.current.params.id,is_claimed:!1}},mounted:function(){var e=this;return z()(C.a.mark(function t(){var a,n;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r({type:"get",id:e.id});case 2:a=t.sent,n=a.data,e.form=n,e.dialogTitle=n.title,e.is_claimed=n.is_claimed;case 7:case"end":return t.stop()}},t,e)}))()},methods:{submit:function(e){var t=this;return z()(C.a.mark(function a(){return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$refs[e].validate(function(){var e=z()(C.a.mark(function e(a){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a&&s({id:t.id,group:t.group}).then(function(e){if(!e.response_error)return t.dialogFormVisible=!1,t.is_claimed=!0,t.$notify({title:"成功",message:"认领成功",type:"success"}),!0;t.$notify.error({title:"捐赠失败",message:"爱心人士真的好多啊，这个微心愿已被其他人认领啦!"})}).catch(function(e){console.log(e)});case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}},a,t)}))()},donation:function(){this.dialogFormVisible=!0},countdown:function(){this.sendCodeBut=!0},sendCode:function(){var e=this;return z()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!/^1\d{10}$/.test(e.group.phone_num)){t.next=4;break}return t.next=3,n(e.group.phone_num);case 3:e.sendCodeBut=!1;case 4:case"end":return t.stop()}},t,e)}))()}}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"details-main"},[a("el-row",[a("el-col",{attrs:{span:14,offset:5}},[a("el-breadcrumb",{staticClass:"breadcrumb",staticStyle:{"maring-top":"20px"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("愿望详情")])],1),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"details"},[a("div",{staticClass:"details-content"},[a("el-form",{attrs:{"label-position":"right","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"地区："}},[e._v("\n                        "+e._s(e.form.local)+"\n                      ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名："}},[e._v("\n                        "+e._s(e.form.person_name)+"\n                      ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别："}},[e._v("\n                        "+e._s(e.form.sex)+"\n                      ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"微心愿："}},[e._v("\n                        "+e._s(e.form.title)+"\n                      ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"基本情况："}},[e._v("\n                        "+e._s(e.form.reason)+"\n                      ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人："}},[e._v("\n                        "+e._s(e.form.contact_name)+"\n                      ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话："}},[e._v("\n                        "+e._s(e.form.contact_phone)+"\n                      ")])],1)],1)],1)],1)]),e._v(" "),a("el-row",[a("el-col",[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"success",disabled:e.is_claimed},on:{click:e.donation}},[e._v("我要捐赠")])],1)])],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"group",style:"margin:0 auto",attrs:{model:e.group,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"donor_name"}},[a("el-input",{model:{value:e.group.donor_name,callback:function(t){e.$set(e.group,"donor_name",t)},expression:"group.donor_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone_num"}},[a("el-input",{model:{value:e.group.phone_num,callback:function(t){e.$set(e.group,"phone_num",t)},expression:"group.phone_num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",prop:"code"}},[a("el-input",{model:{value:e.group.code,callback:function(t){e.$set(e.group,"code",t)},expression:"group.code"}},[a("el-button",{attrs:{slot:"append",disabled:!e.sendCodeBut},on:{click:e.sendCode},slot:"append"},[e.sendCodeBut?e._e():a("yd-countdown",{attrs:{time:60,timetype:"second",callback:e.countdown}},[a("span",[e._v("{%s}秒")])]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.sendCodeBut,expression:"sendCodeBut"}]},[e._v("获取验证码")])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"checked"}},[a("el-checkbox",{model:{value:e.group.checked,callback:function(t){e.$set(e.group,"checked",t)},expression:"group.checked"}},[e._v("同意并接受")]),e._v("   "),a("span",[e._v("《用户支持协议》")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.isSubmit},on:{click:function(t){e.submit("group")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},G=a("VU/8")(J,P,!1,function(e){a("sBKi")},null,null).exports,K={created:function(){!function(e){var t=e.document,a=t.documentElement,r="orientationchange"in e?"orientationchange":"resize",n=function e(){var t=a.getBoundingClientRect().width;return a.style.fontSize=5*Math.max(Math.min(t/750*20,11.2),8.55)+"px",e}();a.setAttribute("data-dpr",e.navigator.appVersion.match(/iphone/gi)?e.devicePixelRatio:1),/iP(hone|od|ad)/.test(e.navigator.userAgent)&&(t.documentElement.classList.add("ios"),parseInt(e.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],10)>=8&&t.documentElement.classList.add("hairline")),t.addEventListener&&(e.addEventListener(r,n,!1),t.addEventListener("DOMContentLoaded",n,!1),e.document.title="我已经参与2018年宁波市青少年万人圆梦行动")}(window)},data:function(){return{loading:!1}},methods:{}},Q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"min-height":"100%"}},[t("yd-navbar",{attrs:{title:"宁波市青少年万人圆梦行动",fontsize:"13px"}},[t("router-link",{attrs:{slot:"left",to:"/wap"},slot:"left"},[t("yd-navbar-back-icon")],1)],1),this._v(" "),t("router-view")],1)},staticRenderFns:[]},X=a("VU/8")(K,Q,!1,function(e){a("oiTv")},null,null).exports,Z={data:function(){return{loacls:["海曙","高新","江北","镇海","北仑","鄞州","宁海","象山","慈溪","余姚","奉化","其他"],receive:O.a,noReceive:H.a,caArr:[A.a],searchValue:{is_claimed:"",title__icontains:""},search1:"",page:1,page_size:10,list:[]}},mounted:function(){var e=this;return z()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getDate();case 1:case"end":return t.stop()}},t,e)}))()},watch:{searchValue:{handler:function(e,t){this.page=1,this.getDate()},deep:!0}},methods:{search:function(){var e=this;this.searchValue.title__icontains=this.search1,setTimeout(function(){e.search1=e.searchValue.title__icontains},500),this.page=1,this.getDate()},loadList:function(){var e=this;return z()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDate();case 2:if(!(t.sent.length<e.page_size)){t.next=6;break}return e.$refs.dreamList.$emit("ydui.infinitescroll.loadedDone"),t.abrupt("return");case 6:e.$refs.dreamList.$emit("ydui.infinitescroll.finishLoad");case 7:case"end":return t.stop()}},t,e)}))()},getDate:function(){var e=this;return z()(C.a.mark(function t(){var a,n,s;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r({type:"get",page:e.page,pageSize:e.page_size,search:e.searchValue});case 2:return a=t.sent,n=a.data.results,1===e.page?e.list=n:(s=e.list).push.apply(s,E()(n)),e.page++,t.abrupt("return",n);case 7:case"end":return t.stop()}},t,e)}))()}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wap"},[a("yd-slider",{attrs:{autoplay:"3000"}},e._l(e.caArr,function(e,t){return a("yd-slider-item",{key:t},[a("img",{attrs:{src:e}})])})),e._v(" "),a("yd-radio-group",{staticStyle:{height:"1rem","padding-left":"0.5rem",display:"table"},attrs:{slot:"left"},slot:"left",model:{value:e.searchValue.is_claimed,callback:function(t){e.$set(e.searchValue,"is_claimed",t)},expression:"searchValue.is_claimed"}},[a("yd-radio",{staticStyle:{display:"table-cell","vertical-align":"middle"},attrs:{val:""}},[e._v("全部")]),e._v(" "),a("yd-radio",{staticStyle:{display:"table-cell","vertical-align":"middle"},attrs:{val:"true"}},[e._v("已认领")]),e._v(" "),a("yd-radio",{staticStyle:{display:"table-cell","vertical-align":"middle"},attrs:{val:"false"}},[e._v("未认领")])],1),e._v(" "),a("yd-cell-group",{staticStyle:{"margin-bottom":"0"}},[a("yd-cell-item",{attrs:{arrow:"",type:"link",href:"/wap/knowledge"}},[a("span",{attrs:{slot:"left"},slot:"left"},[e._v("认领须知")])]),e._v(" "),a("yd-cell-item",{attrs:{arrow:""}},[a("span",{attrs:{slot:"left"},slot:"left"},[e._v("地区：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.searchValue.local__icontains,expression:"searchValue.local__icontains"}],attrs:{slot:"right"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.searchValue,"local__icontains",t.target.multiple?a:a[0])}},slot:"right"},[a("option",{domProps:{value:""}},[e._v("全部")]),e._v(" "),e._l(e.loacls,function(t,r){return a("option",{key:r,domProps:{value:t}},[e._v(e._s(t))])})],2)])],1),e._v(" "),a("yd-flexbox",[a("yd-flexbox-item",[a("yd-search",{attrs:{"on-submit":e.search},model:{value:e.search1,callback:function(t){e.search1=t},expression:"search1"}})],1)],1),e._v(" "),a("yd-layout",[a("yd-infinitescroll",{ref:"dreamList",attrs:{callback:e.loadList}},[a("yd-list",{attrs:{slot:"list",theme:"4"},slot:"list"},e._l(e.list,function(t,r){return a("yd-list-item",{key:r,attrs:{href:"#/wap/"+t.id+"/details?id: "+t.id}},[a("img",{attrs:{slot:"img",src:t.image_url},slot:"img"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),e._v(" "),a("yd-list-other",{attrs:{slot:"other"},slot:"other"},[e._v("\n              "+e._s(t.reason)+"\n            ")])],1)})),e._v(" "),a("span",{attrs:{slot:"doneTip"},slot:"doneTip"},[e._v("没有数据啦~~")])],1)],1)],1)},staticRenderFns:[]},ee=a("VU/8")(Z,Y,!1,function(e){a("ZlLa")},null,null).exports,te={data:function(){return{start:!1,show:!1,check:!0,form:{},group:{donor_name:"",phone_num:"",code:""},id:this.$router.history.current.params.id,is_claimed:!0}},mounted:function(){var e=this;return z()(C.a.mark(function t(){var a,n;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r({type:"get",id:e.id});case 2:a=t.sent,n=a.data,e.form=n,e.is_claimed=n.is_claimed;case 6:case"end":return t.stop()}},t,e)}))()},methods:{submit:function(){var e=this;return z()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$dialog.loading.open("正在提交中"),s({id:e.id,group:e.group}).then(function(t){t&&!t.response_error?setTimeout(function(){e.$dialog.loading.close(),e.$dialog.alert({mes:"恭喜您认领成功啦，点击右上角分享到朋友圈号召更多爱心人士来认领吧！"}),e.is_claimed=!0,e.show=!1,e.check=!1},2e3):(e.$dialog.loading.close(),e.$dialog.alert({mes:'<p style="text-align: left">亲~~</p><p style="text-align: left">爱心人士真的好多啊，您选择的这个微心愿刚刚已被其他爱心人士认领啦~~请您继续选择其他微心愿进行认领哦，么么哒~~</p>'}),e.show=!1,e.check=!1)});case 2:case"end":return t.stop()}},t,e)}))()},sendCode:function(){var e=this;return z()(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(/^1\d{10}$/.test(e.group.phone_num)){t.next=3;break}return e.$dialog.toast({mes:"手机号错误！",icon:"error",timeout:1500}),t.abrupt("return");case 3:return e.$dialog.loading.open("发送中..."),t.next=6,n(e.group.phone_num);case 6:setTimeout(function(){e.start=!0,e.$dialog.loading.close(),e.$dialog.toast({mes:"已发送",icon:"success",timeout:1500})},500);case 7:case"end":return t.stop()}},t,e)}))()}}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"backgroud"},[a("div",{staticClass:"self-form"},[a("el-form",{staticClass:"formBackgroud",attrs:{"label-position":"right","label-width":"1.8rem;"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"地区:"}},[e._v("\n            "+e._s(e.form.local)+"\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名:"}},[e._v("\n            "+e._s(e.form.person_name)+"\n          ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别:"}},[e._v("\n            "+e._s(e.form.sex)+"\n          ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"微心愿:"}},[e._v("\n            "+e._s(e.form.title)+"\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"基本情况:"}},[e._v("\n            "+e._s(e.form.reason)+"\n          ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"联系人："}},[e._v("\n            "+e._s(e.form.contact_name)+"\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"联系电话："}},[e._v("\n            "+e._s(e.form.contact_phone)+"\n          ")])],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{height:"1.5rem"}}),e._v(" "),a("div",{staticClass:"footer"},[a("yd-button",{attrs:{size:"large",type:e.is_claimed?"disabled":"primary",disabled:e.is_claimed},nativeOn:{click:function(t){e.show=!0}}},[e._v("我要认领")])],1),e._v(" "),a("yd-popup",{attrs:{position:"bottom",height:"40%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("yd-cell-group",[a("yd-cell-item",[a("span",{attrs:{slot:"left"},slot:"left"},[e._v("姓名：")]),e._v(" "),a("yd-input",{attrs:{slot:"right",required:"","show-clear-icon":!1,placeholder:"请输入您的姓名"},slot:"right",model:{value:e.group.donor_name,callback:function(t){e.$set(e.group,"donor_name",t)},expression:"group.donor_name"}})],1),e._v(" "),a("yd-cell-item",[a("span",{attrs:{slot:"left"},slot:"left"},[e._v("手机号：")]),e._v(" "),a("yd-input",{attrs:{slot:"right",regex:"mobile",placeholder:"请输入手机号码"},slot:"right",model:{value:e.group.phone_num,callback:function(t){e.$set(e.group,"phone_num",t)},expression:"group.phone_num"}})],1),e._v(" "),a("yd-cell-item",[a("span",{attrs:{slot:"left"},slot:"left"},[e._v("验证码：")]),e._v(" "),a("yd-input",{attrs:{slot:"right",regex:"^\\d{4}$",placeholder:"请输入验证码"},slot:"right",model:{value:e.group.code,callback:function(t){e.$set(e.group,"code",t)},expression:"group.code"}}),e._v(" "),a("yd-sendcode",{attrs:{slot:"right",type:"warning"},nativeOn:{click:function(t){e.sendCode(t)}},slot:"right",model:{value:e.start,callback:function(t){e.start=t},expression:"start"}})],1),e._v(" "),a("yd-cell-item",[a("yd-checkbox",{attrs:{slot:"left"},slot:"left",model:{value:e.check,callback:function(t){e.check=t},expression:"check"}},[e._v("同意并接受")]),e._v(" "),a("span",{attrs:{slot:"right"},slot:"right"},[e._v("《用户支持协议》")])],1),e._v(" "),a("yd-button",{attrs:{size:"large",type:e.check?"warning":"disabled"},nativeOn:{click:function(t){e.submit(t)}}},[e._v("认领提交")])],1)],1)],1)},staticRenderFns:[]},re=a("VU/8")(te,ae,!1,function(e){a("CgrL")},"data-v-13377091",null).exports,ne={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{padding:"0.2rem","font-size":"0.3rem"}},[t("p",[this._v("1.请您填写正确的联系方式。微心愿认领人在了解微心愿基本情况之后，请点击"),t("strong",[this._v("“我要认领”")]),this._v("选项栏填写您的联系方式，以确定认领意愿，已被认领的微心愿将自动变灰。如果多人同时认领同一个微心愿，系统将自动选择第一个提交联系方式的微心愿认领人，其他未被选中的微心愿认领人可以再选择其他的微心愿进行认领。")]),this._v(" "),t("p",[this._v("2.我们会尽快与您对接微心愿。微心愿认领成功后，将有短消息分别发送至微心愿认领人和微心愿联系人（一般为青少年所在的乡镇街道团干部或所在学校的老师）的手机上，请确保不屏蔽相关短信。微心愿联系人和微心愿认领人将尽快通过电话进行联系沟通，商定微心愿的圆梦方式和圆梦时间，并由微心愿联系人协助微心愿认领人将关爱及时送达需要帮助的青少年手中。")]),this._v(" "),t("p",[this._v("3.微心愿认领人可在微信朋友圈发起分享"),t("strong",[this._v("“我已经参与2018年宁波市青少年万人圆梦行动微心愿认领行动”")]),this._v("，动员更多的爱心人士加入到行动中来。")])])}]},se=a("VU/8")(null,ne,!1,null,null,null).exports,oe=a("woOf"),ie=a.n(oe);v.a.interceptors.request.use(function(e){var t=b.a.get("token");return t&&(e.headers.Authorization="jwt "+t),e},function(e){console.log(e)}),v.a.interceptors.response.use(function(e){return e},function(e){if(e&&e.response.status)switch(e.response.status){case 401:xe.push({path:"/admin/login"})}});var le={data:function(){return{form:{username:"",password:""}}},methods:{onSubmit:function(){var e=this;return z()(C.a.mark(function t(){var a,r,n,s;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(e.form);case 2:a=t.sent,r=a.data,n=r.token,s=r.user,b.a.set("token",n),b.a.set("id",s.id),e.$router.push({path:"/admin"});case 9:case"end":return t.stop()}},t,e)}))()}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%","text-align":"center"}},[a("el-form",{staticStyle:{width:"40%",margin:"10% auto"},attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",[a("img",{staticStyle:{width:"70px",height:"70px"},attrs:{src:"http://www.gqt.org.cn/ccylmaterial/tuanhui/200612/W020070123448949739156.gif"}})]),e._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登 录")])],1)],1)],1)},staticRenderFns:[]},ue=a("VU/8")(le,ce,!1,function(e){a("sK3e")},null,null).exports,pe={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]},de=a("VU/8")({data:function(){return{}}},pe,!1,null,null,null).exports,me={data:function(){return{userInfo:{}}},mounted:function(){var e=this;return z()(C.a.mark(function t(){var a,r;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(b.a.get("id"));case 2:a=t.sent,r=a.data,e.userInfo=r;case 5:case"end":return t.stop()}},t,e)}))()},methods:{logout:function(){var e=this;this.$axios.post("/api/v1/auth/token/refresh/",{token:b.a.get("token")}).then(function(t){b.a.remove("token"),b.a.remove("id"),e.$router.push("/admin/login")})}}},fe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[t("el-header",{staticStyle:{"text-align":"right","font-size":"12px","padding-right":"20px"}},[t("div",{staticStyle:{float:"left","padding-top":"5px"}},[t("el-row",[t("el-col",{attrs:{span:5}},[t("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:"http://www.gqt.org.cn/ccylmaterial/tuanhui/200612/W020070123448949739156.gif"}})]),this._v(" "),t("el-col",{attrs:{span:18}},[t("div",{staticClass:"header-title"},[this._v("宁波共青团·万人圆梦")])])],1)],1),this._v(" "),t("el-dropdown",[t("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#ffffff"}},[this._v("\n          "+this._s(this.userInfo.username)),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),this._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("el-button",{attrs:{type:"text"},on:{click:this.logout}},[this._v("退出")])],1)],1)],1)],1),this._v(" "),t("el-container",[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)",height:"100%"},attrs:{width:"200px"}},[t("el-menu",[t("router-link",{attrs:{to:{path:"/admin"}}},[t("el-menu-item",{attrs:{index:"1"}},[t("i",{staticClass:"el-icon-document"}),this._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[this._v("用户管理")])])],1),this._v(" "),t("router-link",{attrs:{to:{path:"/admin/dream"}}},[t("el-menu-item",{attrs:{index:"2"}},[t("i",{staticClass:"el-icon-goods"}),this._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[this._v("愿望管理")])])],1)],1)],1),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)},staticRenderFns:[]},he=a("VU/8")(me,fe,!1,function(e){a("LGF1")},null,null).exports,ge={data:function(){return{list:[],multipleSelection:[],dialogFormVisible:!1,group:{username:"",fullname:"",phone_number:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:function(e,t,a){/^\w+$/.test(t)?a():a(new Error("用户名只能由大小写字母，数字和下划线组成"))},trigger:"change"}],fullname:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone_number:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,a){/^1\d{10}$/.test(t)?a():a(new Error("请输入正确的手机号"))},trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(e,t,a){/^[a-zA-Z\d!@#$%^&*()_+]{8,16}$/.test(t)?a():a(new Error("密码只能由大小写字母，数字和!@#$%^&*()_+组成，长度8到16位"))},trigger:"change"}]}}},mounted:function(){this.refresh()},methods:{refresh:function(){var e=this;return z()(C.a.mark(function t(){var a,r;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:a=t.sent,r=a.data.results,e.list=r;case 5:case"end":return t.stop()}},t,e)}))()},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(e,t){var a=this;this.$alert("删除","删除"+t.username,{showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"确定",confirmButtonClass:"danger"}).then(z()(C.a.mark(function e(){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t.id);case 2:if(r=e.sent,r.data){e.next=8;break}return a.refresh(),a.$notify({title:"成功",message:"删除成功",type:"success"}),e.abrupt("return");case 8:a.$notify.error({title:"错误",message:"删除失败"});case 9:case"end":return e.stop()}},e,a)}))).catch(function(){})},addUser:function(){this.dialogFormVisible=!0},submit:function(e){var t=this;this.$refs[e].validate(function(){var e=z()(C.a.mark(function e(a){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a&&(r=c(t.group),r.data||(t.dialogFormVisible=!1,t.refresh(),t.$notify({title:"成功",message:"新增用户成功",type:"success"})));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())}}},ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"#fff"}},[a("el-button-group",[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("新增")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fullname",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone_number",label:"手机号","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"last_login",label:"最后登录时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增用户",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"group",style:"width:70%;margin:0 auto",attrs:{model:e.group,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.group.username,callback:function(t){e.$set(e.group,"username",t)},expression:"group.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"fullname"}},[a("el-input",{model:{value:e.group.fullname,callback:function(t){e.$set(e.group,"fullname",t)},expression:"group.fullname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone_number"}},[a("el-input",{model:{value:e.group.phone_number,callback:function(t){e.$set(e.group,"phone_number",t)},expression:"group.phone_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.group.password,callback:function(t){e.$set(e.group,"password",t)},expression:"group.password"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("group")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},_e=a("VU/8")(ge,ve,!1,null,null,null).exports,be={data:function(){return{page:1,page_size:20,count:20,list:[],loacls:["海曙","江东","江北","镇海","北仑","鄞州","宁海","象山","慈溪","余姚","奉化"],multipleSelection:[],dialogFormVisible:!1,dialogViewVisible:!1,group:{contact_name:"",contact_phone:"",title:"",person_name:"",age:"",sex:"",person_type:"",want:"",reason:"",local:"",image_url:"",donors:[]},image_url:"",rules:{title:[{required:!0,message:"不能为空",trigger:"blur"}],person_name:[{required:!0,message:"不能为空",trigger:"blur"}],age:[{required:!0,message:"不能为空",trigger:"blur"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a(new Error("密码只能由大小写字母，数字和!@#$%^&*()_+组成，长度8到16位"))},message:"年龄只能为数字",trigger:"blur"}],person_type:[{required:!0,message:"不能为空",trigger:"blur"}],want:[{required:!0,message:"不能为空",trigger:"blur"}],reason:[{required:!0,message:"不能为空",trigger:"blur"}],local:[{required:!0,message:"不能为空",trigger:"change"}],sex:[{required:!0,message:"不能为空",trigger:"change"}],contact_name:[{required:!0,message:"不能为空",trigger:"blur"}],contact_phone:[{required:!0,message:"不能为空",trigger:"blur"},{validator:function(e,t,a){/^1\d{10}$/.test(t)?a():a(new Error("请输入正确的手机号"))},trigger:"blur"}],image_url:[]},options:"post",title:"新增梦想",searchValue:{is_claimed:"",local__icontains:"",title__icontains:""}}},computed:{uploadHeaders:function(){return{Authorization:"jwt "+b.a.get("token")}},isDeteleAll:function(){return!this.multipleSelection.length}},watch:{dialogFormVisible:function(){this.dialogFormVisible||this.clear()}},mounted:function(){this.refresh()},methods:{refresh:function(){var e=this;return z()(C.a.mark(function t(){var a,r,n,s;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u({type:"get",page:1,pageSize:e.page_size,search:e.searchValue});case 2:a=t.sent,r=a.data,n=r.results,s=r.count,e.list=n,e.count=s;case 8:case"end":return t.stop()}},t,e)}))()},upfile:function(){var e=this;return z()(C.a.mark(function t(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(b.a.get("token"));case 1:case"end":return e.stop()}},t,e)}))()},deteleAll:function(){var e=this,t=[];this.multipleSelection.map(function(e){t.push(u({type:"delete",ids:e.id}))}),this.$alert("批量删除","删除",{showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"确定",confirmButtonClass:"danger"}).then(z()(C.a.mark(function a(){return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$axios.all(t).then(function(t){e.refresh(),e.$notify({title:"成功",message:"删除成功",type:"success"})});case 1:case"end":return a.stop()}},a,e)}))).catch(function(){e.$notify.error({title:"错误",message:"删除失败"})})},close:function(){this.dialogFormVisible=!1,this.dialogViewVisible=!1},clear:function(){this.group=ie()({},this.group,{contact_name:"",contact_phone:"",title:"",person_name:"",age:"",sex:"",person_type:"",want:"",reason:"",local:"",image_url:"",donors:[]}),this.image_url=""},handleSizeChange:function(e){this.page_size=e,this.refresh()},handleCurrentChange:function(e){this.page=e,this.refresh()},handleSelectionChange:function(e){this.multipleSelection=e},handleFileSuccess:function(){this.refresh()},handleAvatarSuccess:function(e,t){this.image_url=URL.createObjectURL(t.raw),this.group.image_url=e.image_url},handleEdit:function(e,t){var a=this;return z()(C.a.mark(function e(){var r,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.options="patch",a.title="修改梦想",e.next=4,u({type:"get",ids:t.id});case 4:r=e.sent,n=r.data,a.dialogFormVisible=!0,a.group=n,a.image_url=n.image_url;case 9:case"end":return e.stop()}},e,a)}))()},handleView:function(e,t){var a=this;return z()(C.a.mark(function e(){var r,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.options="view",a.title="查看梦想",e.next=4,u({type:"get",ids:t.id});case 4:r=e.sent,n=r.data,a.dialogViewVisible=!0,a.group=n;case 8:case"end":return e.stop()}},e,a)}))()},handleDelete:function(e,t){var a=this;this.$alert("删除","删除"+t.title,{showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"确定",confirmButtonClass:"danger"}).then(z()(C.a.mark(function e(){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"delete",ids:t.id});case 2:if(r=e.sent,r.data){e.next=8;break}return a.refresh(),a.$notify({title:"成功",message:"删除成功",type:"success"}),e.abrupt("return");case 8:a.$notify.error({title:"错误",message:"删除失败"});case 9:case"end":return e.stop()}},e,a)}))).catch(function(){})},addUser:function(){this.title="新增梦想",this.dialogFormVisible=!0,this.options="post"},submit:function(e){var t=this;this.$refs[e].validate(function(){var e=z()(C.a.mark(function e(a){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a&&u({type:t.options,ids:t.group.id,form:t.group}).then(function(e){t.dialogFormVisible=!1,t.refresh(),t.$notify({title:"成功",message:("post"===t.options?"新增":"修改")+"用户成功",type:"success"})});case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())}}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"#fff"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-button-group",[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("新增")]),e._v(" "),a("el-button",[a("el-upload",{attrs:{action:"/api/v1/monitor/upload_file/","show-file-list":!1,headers:e.uploadHeaders,limit:1,"on-success":e.handleFileSuccess,name:"template"}},[a("i",{staticClass:"el-icon-upload"}),e._v(" 导入\n          ")])],1),e._v(" "),a("a",{attrs:{href:"/api/v1/monitor/export_file/"}},[a("el-button",[e._v("导出未认领愿望")])],1),e._v(" "),a("a",{attrs:{href:"http://8.yunqutech.com/static/template/template.xls"}},[a("el-button",{attrs:{icon:"el-icon-download"}},[e._v("下载模板")])],1),e._v(" "),a("el-button",{attrs:{type:"danger",disabled:e.isDeteleAll,icon:"el-icon-delete"},on:{click:e.deteleAll}},[e._v("删除")])],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form",{staticClass:"search-form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"项目状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.refresh},model:{value:e.searchValue.is_claimed,callback:function(t){e.$set(e.searchValue,"is_claimed",t)},expression:"searchValue.is_claimed"}},[a("el-option",{attrs:{label:"已认领",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"未认领",value:"false"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地区"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.refresh},model:{value:e.searchValue.local__icontains,callback:function(t){e.$set(e.searchValue,"local__icontains",t)},expression:"searchValue.local__icontains"}},e._l(e.loacls,function(e,t){return a("el-option",{key:t,attrs:{value:e}})}))],1)],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,"show-file-list":"false","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"person_name",label:"受助人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"person_type",label:"贫困程度","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"want",label:"基本情况","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleView(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[20,50,100,200],"page-size":e.page_size,layout:"sizes, prev, pager, next",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"group",style:"width:70%;margin:0 auto",attrs:{model:e.group,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.group.title,callback:function(t){e.$set(e.group,"title",t)},expression:"group.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"受助人",prop:"person_name"}},[a("el-input",{model:{value:e.group.person_name,callback:function(t){e.$set(e.group,"person_name",t)},expression:"group.person_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{model:{value:e.group.age,callback:function(t){e.$set(e.group,"age",t)},expression:"group.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"age"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.group.sex,callback:function(t){e.$set(e.group,"sex",t)},expression:"group.sex"}},[a("el-option",{attrs:{value:"男"}}),e._v(" "),a("el-option",{attrs:{value:"女"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"contact_name"}},[a("el-input",{model:{value:e.group.contact_name,callback:function(t){e.$set(e.group,"contact_name",t)},expression:"group.contact_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"contact_phone"}},[a("el-input",{model:{value:e.group.contact_phone,callback:function(t){e.$set(e.group,"contact_phone",t)},expression:"group.contact_phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"贫困程度",prop:"person_type"}},[a("el-input",{model:{value:e.group.person_type,callback:function(t){e.$set(e.group,"person_type",t)},expression:"group.person_type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"基本情况",prop:"reason"}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.group.reason,callback:function(t){e.$set(e.group,"reason",t)},expression:"group.reason"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地区",prop:"local"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.group.local,callback:function(t){e.$set(e.group,"local",t)},expression:"group.local"}},e._l(e.loacls,function(e,t){return a("el-option",{key:t,attrs:{value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"image_url"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/v1/monitor/upload_image/",accept:"image/*",name:"image",headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.image_url?a("img",{staticClass:"avatar",attrs:{src:e.image_url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v(e._s("view"===e.options?"关 闭":"取 消"))]),e._v(" "),"view"!==e.options?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("group")}}},[e._v("确 定")]):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogViewVisible,width:"40%"},on:{"update:visible":function(t){e.dialogViewVisible=t}}},[a("el-form",{style:"width:70%;margin:0 auto",attrs:{model:e.group,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题:"}},[a("p",[e._v(e._s(e.group.title))])]),e._v(" "),a("el-form-item",{attrs:{label:"受助人:"}},[a("p",[e._v(e._s(e.group.person_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"年龄"}},[a("p",[e._v(e._s(e.group.age))])]),e._v(" "),a("el-form-item",{attrs:{label:"联系老师:"}},[a("p",[e._v(e._s(e.group.contact_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"联系电话:"}},[a("p",[e._v(e._s(e.group.contact_phone))])]),e._v(" "),a("el-form-item",{attrs:{label:"贫困程度:"}},[a("p",[e._v(e._s(e.group.person_type))])]),e._v(" "),a("el-form-item",{attrs:{label:"基本情况:"}},[a("p",[e._v(e._s(e.group.reason))])]),e._v(" "),a("el-form-item",{attrs:{label:"地区:"}},[a("p",[e._v(e._s(e.group.local))])]),e._v(" "),a("el-form-item",{attrs:{label:"图片:"}},[e.group.image_url?a("img",{staticClass:"avatar",attrs:{src:e.group.image_url}}):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"捐赠人:"}},e._l(e.group.donors,function(t,r){return a("div",{key:r},[e._v("\n          "+e._s(t[0])+"  "+e._s(t[1])+"\n        ")])}))],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},staticRenderFns:[]},ye=a("VU/8")(be,we,!1,function(e){a("FM59")},null,null).exports;p.default.use(x.a);var xe=new x.a({routes:[{path:"/",redirect:"/index"},{path:"/index",name:"web",component:$,children:[{path:"/",component:I},{path:":id/details",component:G}]},{path:"/wap",name:"wap",component:X,children:[{path:"/",component:ee},{path:":id/details",component:re},{path:"knowledge",component:se}]},{path:"/admin",name:"admin",component:de,children:[{path:"/",component:he,children:[{path:"/",component:_e},{path:"dream",component:ye}]},{path:"login",component:ue}]}]});p.default.use(h.a),p.default.use(m.a),p.default.prototype.$axios=v.a,p.default.config.productionTip=!1,new p.default({el:"#app",router:xe,cookie:b.a,template:"<App/>",components:{App:y}})},QXf2:function(e,t,a){e.exports=a.p+"static/img/carousel2.844000a.jpg"},Vj6C:function(e,t){},ZlLa:function(e,t){},mvg6:function(e,t,a){e.exports=a.p+"static/img/noReceive.05fb71c.png"},oiTv:function(e,t){},sBKi:function(e,t){},sK3e:function(e,t){},tRfm:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2481a00f546594801c0a.js.map